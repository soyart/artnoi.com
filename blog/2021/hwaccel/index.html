<!doctype html><html lang=en><head><title>Artnoi.com - Hardware graphics acceleration on Arch Linux</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="artnoi,Prem Phansuriyanon"><meta name=author content="@artnoi"><meta charset=UTF-8><link href=/style.css rel=stylesheet><script src=/script.js></script></head><body><ul class=navbar id=navbar><li><a href=/><img src=/toplogo.png alt=Artnoi.com class=logo>artnoi</a></li><li class=f-right><a href=/cheat/>cheat</a></li><li class=f-right><a href=https://notes.artnoi.com/#/all-pages>notes</a></li><li class=f-right><a href=/blog/>blog</a></li></ul><p>Dec 6, <a href=/blog/2021>2021</a></p><h1 id=hardware-graphics-acceleration-on-arch-linux>Hardware graphics acceleration on Arch Linux</h1><p>Whenever I set up a new Arch Linux installation on a new hardware, I always had to go through the Arch Wiki and other resources to check out how to enable hardware acceleration for that new hardware, be it an Intel, AMD, or NVIDIA. So I decided to compile those instructions in this article.</p><p>Note that my hardware is pretty current and I have zero interests to include instructions for older hardware in this compilation.</p><p>As always, you should not trust me. Instead, read the <a href=https://wiki.archlinux.org/title/Hardware_video_acceleration>Arch Wiki</a></p><blockquote><p>Note: I use Wayland (GNOME)</p></blockquote><h2 id=verifying-with-mpv>Verifying with mpv</h2><p>Your installation might actually have everything properly set up without manual intervention, which is usually the case with Intel graphics. To verify that hardware acceleration is working, run <code>mpv</code> with <code>--hwdec</code> flag:</p><pre><code class=language-shell>mpv --hwdec=auto &lt;FILE&gt;;
</code></pre><h2 id=opengl-implementation>OpenGL implementation</h2><p>Install package <code>mesa</code></p><h2 id=nvidia-graphics-8-series>NVIDIA graphics (>= 8-series)</h2><h3 id=proprietary-nvidia-driver>Proprietary NVIDIA driver</h3><p>Install package <code>nvidia-utils</code>. Nouveau is slow and buggy on my only NVIDIA card, which happens to be a Pascal Quadro from 2017. Note that this package only works for 8-series and newer cards.</p><h3 id=vdpau>VDPAU</h3><p>Install packages <code>libvdpau</code></p><h3 id=kernel-parameter>Kernel parameter</h3><p>Add this option to your kernel parameter:</p><pre><code>nvidia-drm.modeset=1
</code></pre><h3 id=update-your-initramfs-etc-mkinitcpio-conf>Update your initramfs (<code>/etc/mkinitcpio.conf</code>)</h3><p>Add the following modules to hook <code>MODULE</code>:</p><pre><code class=language-shell>MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)
</code></pre><h2 id=amd-graphics>AMD graphics</h2><h3 id=opengl>OpenGL</h3><p>Install package <code>mesa</code></p><h3 id=x11>X11</h3><p>Install package <code>xf86-video-amdgpu</code></p><h3 id=va-api>VA-API</h3><p>Install package <code>libva-mesa-driver</code>. Verify with <code>vainfo</code> from <code>libva-utils</code>.</p><h3 id=vdpau-1>VDPAU</h3><p>Install package <code>mesa-vdpau</code> and <code>libvdpau_va_gl</code>. Verify with package <code>vdpauinfo</code>. Then, depending on <code>vdpauinfo</code> output, you might want to override VDPAU driver if it&rsquo;s invalid. In my case, VDAPU uses <code>libvdpa_nvidia.so</code>.</p><p>To override this driver and use correct driver for your AMD graphics, use <code>VDPAU_DRIVER</code> env. For example, my machine with Vega GPU (Renoir) uses Mesa Gallium driver:</p><pre><code>export VDPAU_DRIVER=va_gl
</code></pre><h3 id=vdpau-backend-for-va-api>VDPAU backend for VA API</h3><p>Install package <code>libva-vdpau-driver</code></p><h3 id=update-your-initramfs-etc-mkinitcpio-conf-1>Update your initramfs (<code>/etc/mkinitcpio.conf</code>)</h3><p>Add the following modules to hook <code>MODULE</code>:</p><pre><code class=language-shell>    MODULES=(amdgpu radeon)
</code></pre><p>IIRC, these kernel modules are already in the default kernel. For more info on AMDGPU, see <a href=https://wiki.archlinux.org/title/AMDGPU#Video_acceleration>this wiki page</a></p><h2 id=intel-graphics>Intel graphics</h2><p>See <a href=https://wiki.archlinux.org/title/Hardware_video_acceleration>Arch Wiki</a></p><h2 id=firefox-hardware-acceleration>Firefox hardware acceleration</h2><p>See <a href=https://wiki.archlinux.org/title/Firefox#Hardware_video_acceleration>Arch Wiki</a></p><hr><p><a href=#top>Back to top</a></p><hr><footer><p>Copyright (c) 2019 Prem Phansuriyanon</p><p>Verbatim copying and redistribution of this entire page are permitted provided this notice is preserved</p></footer></body></html>